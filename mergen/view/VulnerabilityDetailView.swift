//
//  VulnerabilityDetailView.swift
//  mergen
//
//  Created by Samet Sazak
//

import Foundation
import SwiftUI


struct VulnerabilityDetailView: View {
    var vulnerability: Vulnerability
    
    var body: some View {
        VStack(alignment: .leading) {
            Text("How to Fix?")
                .font(.title)
                .padding(.bottom)
            Text("Status: \(vulnerability.status ?? "Unknown")")
            getStatusIcon()
                .font(.title)
                .foregroundColor(getStatusColor())
                .font(.headline)
                .padding(.bottom)
            Text("Detail: \(vulnerability.description)")
                .font(.headline)
                .padding(.bottom)
            Text("Remediation: \(vulnerability.remediation)")
                .font(.headline)
                .padding(.bottom)
            Text("Mitigation: \(vulnerability.mitigation)")
                .font(.headline)
                .padding(.bottom)
            Spacer()
        }
        .padding()
    }
    
    private func getStatusIcon() -> Image {
        switch vulnerability.checkstatus {
        case "Green":
            return Image(systemName: "checkmark.seal")
        case "Yellow", "Red":
            return Image(systemName: "exclamationmark.triangle.fill")
        default:
            return Image(systemName: "questionmark")
        }
    }
    
    private func getStatusColor() -> Color {
        switch vulnerability.checkstatus {
        case "Green":
            return .green
        case "Yellow":
            return .yellow
        case "Red":
            return .red
        default:
            return .gray
        }
    }
}
